# Linux 

## 文件处理

file表示文件名、dir表示目录名；[ ]可选、< >必选

mkdir  <dir> 	创建新目录

mkdir  -p  <dir> 	递归创建新目录

pwd 	打印当前目录

rmdir  <dir> 	删除空目录

cp  <file1>  <file2>  ...  <目标目录>

cp  -r  <dir>  <dist dir> 	复制目录

cp  -p  <dir>  <dist dir> 	复制并保留文件属性（如创建时间不会变）

mv 	剪切文件、改名

rm  -f  <file> 	强制删除

rm  -r  <dir> 	删除目录

touch  file 	创建空文件

cat  <file> 	显示文件内容（适合短文件）

cat  -n  < file>  	显示文件内容（带行号）

more  <file> 	分页显示文件内容（不可向上翻页）

​	使用【空格】或【f】翻页；【Enter】换行；【q】或【Q】退出

less  <file> 	分页显示文件内容

​	使用【上箭头】或【pgup】向上翻页；【/关键词】搜索，【n】下一个关键字

head  -n  <file> 	查看文件前n行

tail  -n  <file> 	查看文件末尾几行

tail  -f  <file> 	动态显示（新增的）文件末尾内容

ln  -s  <origin file>  <dist file> 	软链接

​	软链接文件权限都为rwxrwxrwx；它的大小很小只是符号链接；箭头指向源文件

ln  <origin file>  <dist file> 	硬链接

​	两个文件同步更新（相当于复制+同步更新）；不能跨分区；不能对目录使用

## 权限管理

所有者-所属组-其他人		r(4)  w(2)  x(1)

文件权限只有文件的所有者和root用户可以更改

chmod  [{u g o a}  {+ - =}  {rwx}]  <文件或目录> 	改变文件目录或权限

chmod  [-R]  <3个数字>  <file/dir> 	（递归）修改文件或目录权限

| 权限 | 对应数字 | 文件           | 目录                    |
| ---- | -------- | -------------- | ----------------------- |
| r    | 4        | 可查看文件内容 | 可列出目录中的内容      |
| w    | 2        | 可修改文件内容 | 可在目录中创建/删除文件 |
| x    | 1        | 可以执行文件   | 可以进入目录            |

chown   <用户>  <file/dir> 	改变文件的所有者

## 文件搜索

**find 最强大和最常用的查找命令**

find  <搜索范围>  [参数]  <匹配条件>  	

例：`find /etc -name init*`

不加搜索范围默认为当前目录下

参数：

`-name / -iname` ：按名称查找/按名称查找并忽略大小写

`-size +num`：按内存大小查找，num为内存大小，单位为K

`-user ` ：查找指定所有者的文件



**locate 系统中有一个包含所有本地文件的数据库(/var/lib/locatedb)，locate将从这里查找文件**

可以在使用locate之前，先使用**updatedb**命令，手动更新数据库

locate [文件名] 	例：`locate /etc/sh`



**whereis命令只能用于程序名的搜索，而且只搜索二进制文件（参数-b）、man说明文件（参数-m）和源代码文件（参数-s）**

例：`whereis grep`



**which搜索命令所在的目录及别名信息，可以看到某个系统命令是否存在**

例：`which grep`

## 磁盘管理

`df -h` 	 查看磁盘的占用情况

`du -sh *`  	查看

##shell 

###！/bin/Bash   标记以下程序是shell脚本  

执行脚本：
1. chmod 755
2. ./shell


echo   输出
echo -e   输出控制字符



## 进程管理

ps [参数]  **查看进程**

-a 显示当前终端所有进程信息
-u 以用户的格式显示进程信息
-x 显示后台进程运行的参数
-ef 可以查看进程的父进程（PPID字段）



pstree [option] **以树的形式来查看进程信息**

-p 显示进程的PID 

-u 显示进程的所属用户



kill [option] <进程号>	**终止进程**
killall 进程名（可使用通配符结束多个进程，结束父进程会结束所有子进程）
-9 强制进程立刻停止



## 服务管理

管理指令

systemctl start|stop|restart|reload|status 服务名





## 内存管理

free -m                                      看内存占用
df -h                                          看硬盘占用率



Linux 

pstree   查看进程树

Bash 常用快捷键  
crtl+A   把光标移动到命令行开头  
ctrl+U   剪切掉光标之前的命令  
ctrl+D   退出当前终端  
ctrl+Y   粘贴剪切的命令  

history 查看历史命令  
alias  查询别名  
alias 别名='原命令'  
让别名永久生效   vi /root/.bashrc   
unalias 别名 删除别名

命令 > 文件   将命令的正确输出写入到指定文件
命令 >> 文件   将命令的正确输出追加写入到指定文件
命令 &> 文件   将命令的正确和错误输出都写入到指定文件
命令 &>> 文件   将命令的正确输出和错误输出都追加写入到指定文件

命令1;命令2   多命令顺序执行，命令之间没有逻辑关系
命令1&&命令2   命令1正确执行，命令2才会执行
命令1||命令2   命令1错误，命令2才会执行
命令1 | 命令2   命令1的正确输出作为命令2的操作对象

grep [选项] "搜索内容" 文件名   在文件中搜索内容
      -i   忽略大小写
      -n   输出行号
      -v   反向查找

Bash中的变量 
自定义变量|环境变量|位置参数变量|预定义变量

自定义变量(只在当前shell中生效)
- 变量用等号连接，等号两侧不能有空格
- 变量的值如果有空格，需要使用单引号或双引号包括
- 在变量的值中，可以使用"\"转义符
- 可以增加变量的值，a=${b}cc
- 变量的值也可以是命令的结果，此时需要使用反引号或$(命令)形式
	使用自定义变量：$变量

环境变量(在当前shell及其子shell中有效，写入配置文件则全局生效) 
export 变量名=变量值    声名变量
env   查询变量
unset 变量名   删除变量

位置参数
$n   n为数字，$0代表命令本身，$n代表第n个参数，${n(n>9)}，主要用来接收用户输入的值
read [选项] [变量名]   接收键盘输入，并赋值给变量
       -p  "提示信息"   在等在read输入时，输出提示信息
       -t  秒数         指定read命令等待用户输入的等待秒数
       -n  字符数       read接收完指定的字符数就会执行
       -s              隐藏输入的数据，适用于机密信息的输入

数值运算(默认为字符串类型，想要运算，有以下三种方法，推荐第三种)
declare [+/-] [选项] 变量名   声名变量类型
          +   取消变量的类型属性
          -   给变量设置类型属性
               -i   将变量声名为整型（integer）
               -x   将变量声名为环境变量
               -p   显示指定变量的类型
expr或let数值运算工具
$((运算式)) 或 $[运算式]   可直接计算


环境变量
source 配置文件   强制刷新配置文件

基础正则表达式
*   前一个字符匹配0次货任意多次
.   匹配除了换行符外的任意一个字符
^   匹配行首，^ab匹配以ab开头的行
$   匹配行位，ab$匹配以ab结尾的行
[]   匹配[]内的任意一个字符,可写为[a-z]
[^x]   匹配x以为的任一字符
\   转义符
\{n\}   表示前面的数字出现n次，[1][3-8][0-9]\{9\}匹配手机号
\{n,\}   表示前面出现的字符不小于n次
\{n,m\}   表示前面的字符至少出现n此，最多出现m次

字符截取命令
cut [选项] 文件名   字段提取命令
     -f 列号   提取第几列(但是列之间为制表符才能识别)
     -d 分隔符   按照指定分隔符分隔列

awk命令   字符截取
awk '条件1{动作1}条件2{动作2} ...' 文件名
awk '{print($2)}' file  输出file中的第2列
    'BEGIN{}'   第一个执行
    'END{}'     最后一个执行

sed 轻量的流编辑器，主要用来将数据进行选取、替换、删除、新增
sed [选项] '[动作]' 文件名   

字符处理命令
sort [选项] 文件名 排序命令
       -f   忽略大小写
       -n   以数值型进行排序，默认使用字符串型排序
       -r   反向排序
       -t   指定分隔符，默认为制表符
       -k n[,m]   按照指定的字段范围排序，从第n字段开始到m字段结束

wc [选项] 文件名   统计命令
     -l   只统计行数
     -w   只统计单词数
     -m   只统计字符数

条件判断

判断文件是否存在
test 选项 文件路径 或者 [-e 文件路径]  
      -d   文件是否存在且为目录
      -e   文件是否存在
      -f   文件是否存在且为普通文件
      -r/-w/-x   文件是否存在且有读/写/执行权限
      文件1 -nt/-ot 文件2   判断文件1的修改实际按是否比文件2的新/旧
      -z   变量是否为空
      -n   判断字符串是否非空

if语句   流程控制
单分支语句：
if [ 条件判断式 ]; then
   程序
fi
双分支语句：
if [ 条件判断式 ]
  then
	程序块
else
	程序块
fi
#注意 if后 []内判断式两端空格必须存在


case   流程控制语句，可判断多种条件关系
case $变量名 in
  "值1")
    如果变量的值等于值1，则执行程序1
    ;;
  "值2")
    如果变量的值等于2，执行程序2
    ;;
    ...
esac

for循环
for 变量in值1值2...值n
  do
    程序
  done

通配符
*   匹配多个
?   匹配一个
[x]   匹配[]内指定数据